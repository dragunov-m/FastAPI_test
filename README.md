
---

## Test task

Задача: Вам необходимо создать сервис для извлечения юридической информации из дерева в форматах JSON и XML. Сервис должен состоять из следующих блоков: 

1. Принятие дерева извлечения: Сервис должен принимать дерево извлечения в форматах JSON и XML. Реализуйте функцию, которая будет принимать деревья и конвертировать их в нужный формат для дальнейшей обработки. 
2. Постпроцессинг. После перевода дерева в нужный формат реализуйте блок постпроцессинга, в котором на объединенное дерево извлечения применяются правила нормализации. Например, можно привести значения сущностей к определенному виду или привести их к единому формату. Реализуйте функции для применения этих правил нормализации на дерево извлечения. 
3. Реализуйте функции нормализации для следующих значений: 
    - Дата. Необходимо написать функцию приведения любых дат к определенному виду: ДД.ММ.ГГГГ. Примеры даты: 1 февраля 2022, 01.02.2022 года и т.д. (!) Учтите, что входящий текст может иметь артефакты.
    - Срок. Необходимо написать функцию приведения любых временных сроков в следующий формат: Г_М_Н_Д, где Г- это год, М- это месяц, Н – неделя, Д – день. Примеры сроков: 1 месяц, 2 года, три недели, через 2 дня, полгода (!) Учтите, что входящий текст может иметь артефакты.
4. На выходе сервиса должен получиться словарь. Ключ – путь до атрибута, Значение – значение атрибута.

Примеры деревьев:

Дерево №1:

    • ДатаДокумента: 5 ноября 2022 года
    • Продавец[0]: Иванов Лев Давидович
    • Продавец[1]: Петрова Мария Васильевна
    • Оплата:
        ◦ Сумма: 10000,00 рублей
    • Покупатель: ООО Управляющая компания «Арасака»
    • ПредметДоговора:
        ◦ ВидОбъектаНедвижимости: ЗемельныйУчасток
        ◦ ВидРазрешенногоИспользования: для сельскохозяйственного производства 
        ◦ КадастровыйНомер: 1237:09234123532:4521
        ◦ Площадь: 5 га
Дерево №2:

    • Оплата:
        ◦ СрокОплаты: в течении 30 дней со дня подписания договора
    • ПредметДоговора:
        ◦ Адрес: Московская область, 5 км от ориентира Ракушки
        ◦ ОбъектыНаЗемельномУчастке: здание
        ◦ ОбъектыНаЗемельномУчастке: склад
        ◦ ОбременениеОбъектаНедвижимости: ипотека
        ◦ ОбъектПереданПокупателюДоДоговора: НЕТ

Выход сервиса:
{"ДатаДокумента": "05.11.2022",
 "Продавец": ["Иванов Лев Давидович", "Петрова Мария Васильевна"],
 "Оплата": {"СрокОплаты": "0_0_0_30", "Сумма": "10000,00 рублей"}
 ...}

Требования: 
- Сервис должен быть реализован на языке Python. 
- Сервис должен быть реализован в виде API, который будет принимать дерево в формате xml/json и возвращать результат обработки. 
- Код должен быть написан с соблюдением принципов чистого кода и хорошо структурирован. 

Удачи в выполнении задания! Если у вас возникнут вопросы, не стесняйтесь задавать.

---

## Launch Application

To start the application, use the following command in your terminal:

```bash
uvicorn main:app --reload
```

## Endpoints

#### JSON endpoint

```
127.0.0.1:8000/process-json/
```

#### XML endpoint
```
127.0.0.1:8000/process-xml/
```

## Test Data

For testing purposes, use the following JSON and XML data structures:

### JSON Test Data

#### Test Data 1

```json
{
  "document_date": "5 ноября 2022 года",
  "sellers": [
    "Иванов Лев Давидович",
    "Петрова Мария Васильевна"
  ],
  "payment": {
    "amount": "10000,00 рублей"
  },
  "customer": "ООО Управляющая компания «Арасака»",
  "contract_subject": {
    "estate_type": "ЗемельныйУчасток",
    "permitted_use": "для сельскохозяйственного производства",
    "cadastral_number": "1237:09234123532:4521",
    "area": "5 га"
  }
}
```

#### Test Data 2

```json
{
  "payment": {
    "payment_term": "в течении 30 дней со дня подписания договора"
  },
  "contract_subject": {
    "address": "Московская область, 5 км от ориентира Ракушки",
    "objects_on_land": ["здание", "склад"],
    "estate_encumbrance": "ипотека",
    "objects_transferred_before_contract": "НЕТ"
  }
}
```

### XML Test Data

#### Test Data 1

```xml
<root>
    <document_date>5 ноября 2022 года</document_date>
    <seller>Иванов Лев Давидович</seller>
    <seller>Петрова Мария Васильевна</seller>
    <payment>
        <amount>10000,00 рублей</amount>
    </payment>
    <customer>ООО Управляющая компания «Арасака»</customer>
    <contract_subject>
        <estate_type>ЗемельныйУчасток</estate_type>
        <permitted_use>для сельскохозяйственного производства</permitted_use>
        <cadastral_number>1237:09234123532:4521</cadastral_number>
        <area>5 га</area>
    </contract_subject>
</root>
```

#### Test Data 2

```xml
<root>
  <payment>
    <payment_term>в течении 30 дней со дня подписания договора</payment_term>
  </payment>
  <contract_subject>
    <address>Московская область, 5 км от ориентира Ракушки</address>
    <objects_on_land>
      <object>здание</object>
      <object>склад</object>
    </objects_on_land>
    <estate_encumbrance>ипотека</estate_encumbrance>
    <objects_transferred_before_contract>НЕТ</objects_transferred_before_contract>
  </contract_subject>
</root>
```

---